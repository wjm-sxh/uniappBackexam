import{a as E,j as c,o as m,c as h,g as n,m as i,p as v,f as k,F as B,q as U,s as C,E as F,v as D,i as g,x as b}from"./index-PsrkDi4f.js";/* empty css                 */import{E as z}from"./el-progress-C0qkmkk2.js";import{p as N,b as I,c as M}from"./request-aijzG6J_.js";import{E as f}from"./index-2NzJ_tzg.js";import{E as T}from"./index-B8WeAn_N.js";import"./isEqual-CJgsbmic.js";import"./_initCloneObject-9ZjZV-aK.js";const P={class:"banner-form"},S={class:"opt",style:{position:"relative"}},j=["src"],q={key:0,style:{width:"178px","text-align":"center","margin-top":"5px",position:"absolute",top:"5px",left:"5px","z-index":"1000"}},A={class:"opt"},$={class:"opt"},G={class:"opt"},Y=E({__name:"AddView",setup(H){const r=c(""),p=c(""),o=c(""),_=c("");r.value="广告标题"+Math.random().toString().slice(2),p.value="https://www.ohmycode.cn/xxxx?id="+new Date().getTime();const w=async a=>{if(a){let e=new FormData;e.append("photo",a.raw),await N(e).then(t=>{let{code:l,picUrl:s}=t;l==200?(o.value=U.url+s,_.value=s):f.error(t.msg)})}},y=async a=>{await I({picUrl:a}).then(e=>{let{code:t}=e;t==200&&(o.value="")})},V=async()=>{let a=r.value,e=_.value,t=p.value;if(e==""||t=="")return f.error("缺少参数，请检查再提交"),!1;await M({title:a,imgUrl:e,href:t}).then(l=>{console.log(l);let{code:s,msg:d}=l;s==200?(f.success(d),r.value="广告标题"+Math.random().toString().slice(2),p.value="https://www.ohmycode.cn/xxxx?id"+new Date().getTime(),o.value="",_.value=""):f.error(d)})};return(a,e)=>{const t=C("Plus"),l=b,s=z,d=F,x=T;return m(),h(B,null,[e[5]||(e[5]=n("h3",null,"发布轮播图",-1)),n("div",P,[n("div",S,[i(s,{class:"avatar-uploader",drag:"",action:"#","on-change":w,"auto-upload":!1,"show-file-list":!1},{default:v(()=>[o.value?(m(),h("img",{key:0,src:o.value,class:"avatar"},null,8,j)):(m(),D(l,{key:1,class:"avatar-uploader-icon"},{default:v(()=>[i(t)]),_:1}))]),_:1}),o.value?(m(),h("div",q,[i(d,{onClick:e[0]||(e[0]=u=>y(o.value)),type:"danger",plain:""},{default:v(()=>e[3]||(e[3]=[g("删除图片")])),_:1})])):k("",!0)]),n("div",A,[i(x,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=u=>r.value=u),style:{width:"100%",height:"44px","font-size":"16px"},placeholder:"广告标题"},null,8,["modelValue"])]),n("div",$,[i(x,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=u=>p.value=u),style:{width:"100%",height:"44px","font-size":"16px"},placeholder:"广告链接"},null,8,["modelValue"])]),n("div",G,[i(d,{onClick:V,type:"primary",size:"large"},{default:v(()=>e[4]||(e[4]=[g("发布轮播图")])),_:1})])])],64)}}});export{Y as default};
