import{b as U,d as N,a as k,u as I,y as A,o as p,c as _,n as V,e as h,r as L,f as C,h as M,_ as j,w as q,j as x,g as m,m as s,p as i,F as R,q as z,s as G,E as H,v as J,i as b,x as K}from"./index-PsrkDi4f.js";import{E as O,a as Q}from"./el-table-column-DxxjLTlZ.js";import"./el-scrollbar-BVndcwmd.js";/* empty css                 */import{E as W}from"./el-progress-C0qkmkk2.js";import{p as X,b as F,d as Y,e as Z,f as ee}from"./request-aijzG6J_.js";import{E as f}from"./index-2NzJ_tzg.js";import{E as te}from"./index-B8WeAn_N.js";import{E as oe}from"./index-CNT-Lsf8.js";import"./isEqual-CJgsbmic.js";import"./_initCloneObject-9ZjZV-aK.js";const ae=U({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:N(String),default:"solid"}}),le=k({name:"ElDivider"}),se=k({...le,props:ae,setup(B){const u=B,o=I("divider"),v=A(()=>o.cssVar({"border-style":u.borderStyle}));return(c,D)=>(p(),_("div",{class:V([h(o).b(),h(o).m(c.direction)]),style:M(h(v)),role:"separator"},[c.$slots.default&&c.direction!=="vertical"?(p(),_("div",{key:0,class:V([h(o).e("text"),h(o).is(c.contentPosition)])},[L(c.$slots,"default")],2)):C("v-if",!0)],6))}});var ne=j(se,[["__file","divider.vue"]]);const re=q(ne),ie={class:"category-form"},de={class:"opt"},ce=["src"],pe={key:0,style:{width:"178px","text-align":"center","margin-top":"5px"}},ue={class:"opt"},me={class:"opt"},fe={class:"category-table"},_e=["src"],Se=k({__name:"Category",setup(B){const u=x(""),o=x(""),v=x(""),c=async l=>{if(l){let e=new FormData;e.append("photo",l.raw),await X(e).then(a=>{console.log("图片路径:",a);let{code:r,picUrl:t}=a;r==200?(o.value=z.url+t,v.value=t):f.error(a.msg)})}},D=async l=>{await F({picUrl:l}).then(e=>{let{code:a}=e;a==200&&(o.value="")})},P=async()=>{let l=u.value,e=v.value;if(l==""||e=="")return f.error("缺少参数，请检查再提交"),!1;await Y({text:l,icon:e}).then(a=>{let{code:r,msg:t}=a;r==200?(f.success(t),u.value="",o.value="",v.value="",S()):f.error(t)})},E=x([]),$=(l,e)=>{let{id:a,icon:r,text:t}=e;oe.confirm(`是否删除这个“${t}”考试分类?`,"Confirm",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{await ee({id:a}).then(n=>{let{code:y,msg:g}=n;y!=200&&f.error(g)}),await F({picUrl:r}).then(n=>{let{code:y,msg:g}=n;y!=200&&f.error(g)}),E.value.splice(l,1)}).catch(n=>{})},S=async()=>{await Z().then(l=>{let{code:e,result:a}=l;if(e==200){let r=a.map((t,n)=>(t.index=n+1,t.icon=z.url+t.icon,t));E.value=r}})};return S(),(l,e)=>{const a=G("Plus"),r=K,t=W,n=H,y=te,g=re,w=Q,T=O;return p(),_(R,null,[e[6]||(e[6]=m("h3",null,"考试分类",-1)),m("div",ie,[m("div",de,[s(t,{class:"avatar-uploader",drag:"",action:"#","on-change":c,"auto-upload":!1,"show-file-list":!1},{default:i(()=>[o.value?(p(),_("img",{key:0,src:o.value,class:"avatar"},null,8,ce)):(p(),J(r,{key:1,class:"avatar-uploader-icon"},{default:i(()=>[s(a)]),_:1}))]),_:1}),o.value?(p(),_("div",pe,[s(n,{onClick:e[0]||(e[0]=d=>D(o.value)),type:"danger",plain:""},{default:i(()=>e[2]||(e[2]=[b("删除图片")])),_:1})])):C("",!0)]),m("div",ue,[s(y,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=d=>u.value=d),style:{width:"360px",height:"44px","font-size":"16px"},placeholder:"考试分类名称"},null,8,["modelValue"])]),m("div",me,[s(n,{onClick:P,type:"primary",size:"large"},{default:i(()=>e[3]||(e[3]=[b("添加考试分类")])),_:1})])]),s(g,{"content-position":"left"},{default:i(()=>e[4]||(e[4]=[b("分类列表")])),_:1}),m("div",fe,[s(T,{data:E.value,stripe:"",style:{width:"100%"}},{default:i(()=>[s(w,{prop:"index",label:"序号",width:"90"}),s(w,{prop:"text",label:"分类名称",width:"180"}),s(w,{label:"图标",width:"180"},{default:i(d=>[d.row.icon?(p(),_("img",{key:0,style:{width:"60px"},src:d.row.icon,alt:""},null,8,_e)):C("",!0)]),_:1}),s(w,{label:"操作"},{default:i(d=>[s(n,{size:"small",type:"danger",onClick:ve=>$(d.$index,d.row)},{default:i(()=>e[5]||(e[5]=[b(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])],64)}}});export{Se as default};
