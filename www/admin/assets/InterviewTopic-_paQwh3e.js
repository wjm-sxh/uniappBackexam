import{a as G,j as u,o as w,c as I,g as a,m as n,p as d,e as m,av as b,F as h,E as H,aw as J,A as U,v as q,i as y,t as T}from"./index-PsrkDi4f.js";import{E as K,a as P}from"./el-table-column-DxxjLTlZ.js";import"./el-scrollbar-BVndcwmd.js";/* empty css                 */import{E as Q,a as X}from"./el-select-lkdsic8F.js";import{l as Y,o as Z,s as ee,v as te,w as le}from"./request-aijzG6J_.js";import{E as V}from"./index-2NzJ_tzg.js";import{E as oe}from"./index-B8WeAn_N.js";import{E as ae}from"./index-CNT-Lsf8.js";import"./isEqual-CJgsbmic.js";import"./_initCloneObject-9ZjZV-aK.js";const ne={class:"topic-form"},se={class:"opt"},ie={class:"opt"},re={class:"opt"},ue={class:"opt"},de={class:"opt"},pe={class:"menu-list",style:{"margin-top":"15px"}},me={style:{padding:"10px 0"}},ce={style:{"line-height":"1.75"}},_e={class:"dialog-footer"},he=G({__name:"InterviewTopic",setup(ve){const c=u(!1);let _=u(""),v=u(""),f=u(""),g=u(""),C=u([]),E=u([]),M=u(""),B=u(""),k=u([]),F=u(""),D=u("");const A=(l,e)=>{F.value=l,D.value=e,c.value=!0},N=l=>{let e=C.value.filter(o=>o.category_id==l);e&&(M.value=e[0].category_text),L(l)},j=l=>{let e=E.value.filter(o=>o.menu_id==l);e&&(B.value=e[0].menu_name)},S=async()=>{await Y().then(l=>{let{code:e,result:o}=l;if(e==200){let i=o.map((s,p)=>{let r={};return r.category_id=s.category_id,r.index=p,r.category_text=s.category_text,r});C.value=i}})},L=async l=>{await Z({category_id:l}).then(e=>{let{code:o,result:i}=e;o==200&&(E.value=i)})},O=async()=>{let l=_.value,e=v.value,o=B.value,i=f.value,s=g.value;l&&e&&o&&i&&s?await ee({category_id:l,menu_id:e,menu_name:o,topic_question:i,topic_answer:s}).then(p=>{let{code:r,msg:x}=p;r==200?(V.success(x),z()):V.error(x)}):V.error("表单不能缺少参数")},z=async()=>{await te().then(l=>{let{code:e,result:o}=l;if(e==200){let i=o.map(s=>(s.topic_answer.length>12&&(s.topic_answer_val=s.topic_answer.slice(0,30)+"..."),s));k.value=i}})},R=(l,e)=>{let{topic_id:o}=e;ae.confirm("是否删除这个题目?","提示",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{await le({topic_id:o}).then(i=>{let{code:s,msg:p}=i;s!=200&&V.error(p)}),k.value.splice(l,1)}).catch(()=>{})};return S(),z(),(l,e)=>{const o=X,i=Q,s=oe,p=H,r=P,x=K,W=J;return w(),I(h,null,[e[16]||(e[16]=a("h3",null,"面试题列表",-1)),a("div",ne,[a("div",se,[e[7]||(e[7]=a("span",{class:"label"}," 选择主菜单: ",-1)),n(i,{modelValue:m(_),"onUpdate:modelValue":e[0]||(e[0]=t=>b(_)?_.value=t:_=t),placeholder:"请选择主菜单",size:"large",style:{width:"calc(100% - 120px)"},onChange:N},{default:d(()=>[(w(!0),I(h,null,U(m(C),t=>(w(),q(o,{key:t.category_id,label:t.category_text,value:t.category_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),a("div",ie,[e[8]||(e[8]=a("span",{class:"label"}," 选择子菜单: ",-1)),n(i,{modelValue:m(v),"onUpdate:modelValue":e[1]||(e[1]=t=>b(v)?v.value=t:v=t),placeholder:"请选择子菜单",size:"large",style:{width:"calc(100% - 120px)"},onChange:j},{default:d(()=>[(w(!0),I(h,null,U(m(E),t=>(w(),q(o,{key:t.menu_id,label:t.menu_name,value:t.menu_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),a("div",re,[e[9]||(e[9]=a("span",{class:"label"}," 题目: ",-1)),n(s,{modelValue:m(f),"onUpdate:modelValue":e[2]||(e[2]=t=>b(f)?f.value=t:f=t),size:"large",style:{width:"calc(100% - 120px)"},placeholder:"请输入题目"},null,8,["modelValue"])]),a("div",ue,[e[10]||(e[10]=a("span",{class:"label"}," 答案解析: ",-1)),n(s,{modelValue:m(g),"onUpdate:modelValue":e[3]||(e[3]=t=>b(g)?g.value=t:g=t),type:"textarea",style:{width:"calc(100% - 120px)","min-height":"200px"},placeholder:"答案解析"},null,8,["modelValue"])]),a("div",de,[n(p,{onClick:O,type:"primary"},{default:d(()=>e[11]||(e[11]=[y("发布题目")])),_:1})])]),a("div",pe,[n(x,{data:m(k),stripe:"",style:{width:"100%"}},{default:d(()=>[n(r,{prop:"menu_id",label:"子菜单ID",width:"120"}),n(r,{prop:"menu_name",label:"子菜单名称",width:"180"}),n(r,{prop:"topic_question",label:"面试题",width:"280"}),n(r,{label:"面试题答案分析"},{default:d(t=>[a("span",null,T(t.row.topic_answer_val),1)]),_:1}),n(r,{label:"操作"},{default:d(t=>[n(p,{size:"small",type:"danger",onClick:$=>R(t.$index,t.row)},{default:d(()=>e[12]||(e[12]=[y(" 删除 ")])),_:2},1032,["onClick"]),n(p,{size:"small",type:"primary",onClick:$=>A(t.row.topic_question,t.row.topic_answer)},{default:d(()=>e[13]||(e[13]=[y(" 查看详情 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),n(W,{modelValue:c.value,"onUpdate:modelValue":e[6]||(e[6]=t=>c.value=t),title:"Warning",width:"1000",center:""},{footer:d(()=>[a("div",_e,[n(p,{onClick:e[4]||(e[4]=t=>c.value=!1)},{default:d(()=>e[14]||(e[14]=[y("关闭")])),_:1}),n(p,{type:"primary",onClick:e[5]||(e[5]=t=>c.value=!1)},{default:d(()=>e[15]||(e[15]=[y(" 确定 ")])),_:1})])]),default:d(()=>[a("div",null,[a("h4",me,T(m(F)),1),a("p",ce,T(m(D)),1)])]),_:1},8,["modelValue"])])],64)}}});export{he as default};
