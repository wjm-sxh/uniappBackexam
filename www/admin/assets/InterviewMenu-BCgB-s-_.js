import{a as F,j as c,o as v,c as b,g as i,m as n,p as m,e as _,av as E,F as h,E as T,A as D,v as z,i as C}from"./index-PsrkDi4f.js";import{E as N,a as j}from"./el-table-column-DxxjLTlZ.js";import"./el-scrollbar-BVndcwmd.js";/* empty css                 */import{E as A,a as U}from"./el-select-lkdsic8F.js";import{l as q,n as L,o as O,q as R}from"./request-aijzG6J_.js";import{E as f}from"./index-2NzJ_tzg.js";import{E as S}from"./index-B8WeAn_N.js";import{E as G}from"./index-CNT-Lsf8.js";import"./isEqual-CJgsbmic.js";import"./_initCloneObject-9ZjZV-aK.js";const H={class:"menu-form"},J={class:"opt"},K={class:"opt"},P={class:"opt"},Q={class:"menu-list",style:{"margin-top":"15px"}},ie=F({__name:"InterviewMenu",setup(W){let u=c(""),p=c(""),g=c([]),w=c(""),y=c([]);const I=async()=>{await q().then(l=>{let{code:e,result:a}=l;if(e==200){let d=a.map((r,s)=>{let o={};return o.category_id=r.category_id,o.index=s,o.category_text=r.category_text,o});g.value=d}})},V=l=>{let e=g.value.filter(a=>a.category_id==l);e&&(w.value=e[0].category_text)},B=async()=>{let l=u.value,e=p.value,a=w.value;l&&e?await L({category_id:l,menu_name:e,category_text:a}).then(d=>{let{code:r,msg:s}=d;r==200?(x(),f.success(s)):f.error(s)}):f.error("表单不能缺少参数")},M=(l,e)=>{let{menu_id:a}=e;G.confirm("是否删除这个题目?","提示",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{await R({menu_id:a}).then(d=>{let{code:r,msg:s}=d;r!=200&&f.error(s)}),y.value.splice(l,1)}).catch(()=>{})},x=async()=>{await O().then(l=>{let{code:e,result:a}=l;e==200&&(y.value=a)})};return I(),x(),(l,e)=>{const a=U,d=A,r=S,s=T,o=j,k=N;return v(),b(h,null,[e[6]||(e[6]=i("h3",null,"面试题子菜单",-1)),i("div",H,[i("div",J,[e[2]||(e[2]=i("span",{class:"label"}," 选择主菜单: ",-1)),n(d,{modelValue:_(u),"onUpdate:modelValue":e[0]||(e[0]=t=>E(u)?u.value=t:u=t),placeholder:"请选择主菜单",size:"large",style:{width:"240px"},onChange:V},{default:m(()=>[(v(!0),b(h,null,D(_(g),t=>(v(),z(a,{key:t.category_id,label:t.category_text,value:t.category_id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),i("div",K,[e[3]||(e[3]=i("span",{class:"label"}," 子菜单名称: ",-1)),n(r,{modelValue:_(p),"onUpdate:modelValue":e[1]||(e[1]=t=>E(p)?p.value=t:p=t),size:"large",style:{width:"240px"},placeholder:"请输入子菜单"},null,8,["modelValue"])]),i("div",P,[n(s,{onClick:B,type:"primary"},{default:m(()=>e[4]||(e[4]=[C("添加子菜单")])),_:1})])]),i("div",Q,[n(k,{data:_(y),stripe:"",style:{width:"100%"}},{default:m(()=>[n(o,{prop:"index",label:"序号",width:"70"}),n(o,{prop:"category_id",label:"主菜单ID",width:"180"}),n(o,{prop:"category_text",label:"主菜单名称",width:"180"}),n(o,{prop:"menu_id",label:"子菜单ID",width:"180"}),n(o,{prop:"menu_name",label:"子菜单名称",width:"280"}),n(o,{label:"操作"},{default:m(t=>[n(s,{size:"small",type:"danger",onClick:X=>M(t.$index,t.row)},{default:m(()=>e[5]||(e[5]=[C(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])],64)}}});export{ie as default};
