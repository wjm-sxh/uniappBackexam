import{a as g,j as w,o as u,c as _,g as m,m as l,p as r,F as b,q as x,f as B,i as E,E as C}from"./index-PsrkDi4f.js";import{E as y,a as U}from"./el-table-column-DxxjLTlZ.js";import"./el-scrollbar-BVndcwmd.js";import{g as k,r as v,b as T}from"./request-aijzG6J_.js";import{E as V}from"./index-CNT-Lsf8.js";import{E as f}from"./index-2NzJ_tzg.js";import"./isEqual-CJgsbmic.js";import"./_initCloneObject-9ZjZV-aK.js";import"./index-B8WeAn_N.js";const N={class:"banner-table"},D=["src"],F=["href"],J=g({__name:"ListView",setup(L){const d=w([]),h=(i,o)=>{let{id:t,imgUrl:n,title:a}=o;console.log({id:t,imgUrl:n,title:a}),V.confirm(`是否删除这个“${a}”的轮播图?`,"警告",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{await v({id:t}).then(e=>{let{code:s,msg:c}=e;s!=200&&f.error(c)}),p(),await T({picUrl:n}).then(e=>{let{code:s,msg:c}=e;s!=200&&f.error(c)}).catch(e=>{console.log(e)})}).catch(e=>{})},p=async()=>{await k().then(i=>{let{code:o,result:t}=i;if(o==200){let n=t.map((a,e)=>(a.index=e+1,a.imgUrl=x.url+a.imgUrl,a));d.value=n}})};return p(),(i,o)=>{const t=U,n=C,a=y;return u(),_(b,null,[o[1]||(o[1]=m("h3",null,"轮播图列表",-1)),m("div",N,[l(a,{data:d.value,stripe:"",style:{width:"100%"}},{default:r(()=>[l(t,{prop:"index",label:"序号",width:"90"}),l(t,{prop:"title",label:"广告标题",width:"380"}),l(t,{label:"图片",width:"400"},{default:r(e=>[e.row.imgUrl?(u(),_("img",{key:0,style:{width:"200px"},src:e.row.imgUrl},null,8,D)):B("",!0)]),_:1}),l(t,{label:"广告链接",width:"180"},{default:r(e=>[m("a",{href:e.row.href},"链接",8,F)]),_:1}),l(t,{label:"操作"},{default:r(e=>[l(n,{size:"small",type:"danger",onClick:s=>h(e.$index,e.row)},{default:r(()=>o[0]||(o[0]=[E(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])],64)}}});export{J as default};
