import{a as U,j as f,o as _,c as y,g as p,m as l,p as c,f as C,F as D,q as E,s as T,E as N,v as $,i as w,x as z}from"./index-PsrkDi4f.js";import{E as M,a as P}from"./el-table-column-DxxjLTlZ.js";import"./el-scrollbar-BVndcwmd.js";/* empty css                 */import{E as j}from"./el-progress-C0qkmkk2.js";import{p as q,b,k as A,l as L,m as G}from"./request-aijzG6J_.js";import{E as u}from"./index-2NzJ_tzg.js";import{E as H}from"./index-B8WeAn_N.js";import{E as J}from"./index-CNT-Lsf8.js";import"./isEqual-CJgsbmic.js";import"./_initCloneObject-9ZjZV-aK.js";const K={class:"category-form"},O={class:"opt"},Q=["src"],R={key:0,style:{width:"178px","text-align":"center","margin-top":"5px"}},S={class:"opt"},W={class:"opt"},X={class:"category-table",style:{"margin-top":"15px"}},Y=["src"],ue=U({__name:"InterviewCategory",setup(Z){const g=f(""),d=f(""),v=f(""),k=async a=>{if(a){let e=new FormData;e.append("photo",a.raw),await q(e).then(o=>{console.log("图片路径:",o);let{code:s,picUrl:t}=o;s==200?(d.value=E.url+t,v.value=t):u.error(o.msg)})}},B=async a=>{await b({picUrl:a}).then(e=>{let{code:o}=e;o==200&&(d.value="")})},F=async()=>{let a=g.value,e=v.value;if(a==""||e=="")return u.error("缺少参数，请检查再提交"),!1;await A({category_text:a,category_icon:e}).then(o=>{let{code:s,msg:t}=o;s==200?(u.success(t),g.value="",d.value="",v.value="",x()):u.error(t)})},h=f([]),I=(a,e)=>{let{category_id:o,category_icon:s,category_text:t}=e;J.confirm(`是否删除这个“${t}”面试题主分类?`,"警告",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(async()=>{await G({category_id:o}).then(n=>{let{code:m,msg:r}=n;m!=200&&u.error(r)}),h.value.splice(a,1),s.length!=0&&await b({picUrl:s}).then(n=>{let{code:m,msg:r}=n;m!=200&&u.error(r)})}).catch(n=>{})},x=async()=>{await L().then(a=>{let{code:e,result:o}=a;if(e==200){let s=o.map((t,n)=>(t.index=n+1,t.category_icon=E.url+t.category_icon,t));h.value=s}})};return x(),(a,e)=>{const o=T("Plus"),s=z,t=j,n=N,m=H,r=P,V=M;return _(),y(D,null,[e[5]||(e[5]=p("h3",null,"面试题主分类",-1)),p("div",K,[p("div",O,[l(t,{class:"avatar-uploader",drag:"",action:"#","on-change":k,"auto-upload":!1,"show-file-list":!1},{default:c(()=>[d.value?(_(),y("img",{key:0,src:d.value,class:"avatar"},null,8,Q)):(_(),$(s,{key:1,class:"avatar-uploader-icon"},{default:c(()=>[l(o)]),_:1}))]),_:1}),d.value?(_(),y("div",R,[l(n,{onClick:e[0]||(e[0]=i=>B(d.value)),type:"danger",plain:""},{default:c(()=>e[2]||(e[2]=[w("删除图片")])),_:1})])):C("",!0)]),p("div",S,[l(m,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=i=>g.value=i),style:{width:"360px",height:"44px","font-size":"16px"},placeholder:"面试题主分类名称"},null,8,["modelValue"])]),p("div",W,[l(n,{onClick:F,type:"primary",size:"large"},{default:c(()=>e[3]||(e[3]=[w("添加面试题主分类")])),_:1})])]),p("div",X,[l(V,{data:h.value,stripe:"",style:{width:"100%"}},{default:c(()=>[l(r,{prop:"index",label:"序号",width:"90"}),l(r,{prop:"category_text",label:"分类名称",width:"180"}),l(r,{label:"图标",width:"180"},{default:c(i=>[i.row.category_icon?(_(),y("img",{key:0,style:{width:"60px"},src:i.row.category_icon,alt:""},null,8,Y)):C("",!0)]),_:1}),l(r,{label:"操作"},{default:c(i=>[l(n,{size:"small",type:"danger",onClick:ee=>I(i.$index,i.row)},{default:c(()=>e[4]||(e[4]=[w(" 删除 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])],64)}}});export{ue as default};
