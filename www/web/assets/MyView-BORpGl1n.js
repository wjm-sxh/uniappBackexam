import{d as N,h as S,r as T,c as k,a as t,b as s,u as r,q as y,t as p,w as f,g as u,F as A,k as I,f as _,o as w}from"./index-BxMPK5Cm.js";import{r as v}from"./request-Ci6WhDJZ.js";const V={class:"header"},b={class:"my"},x={class:"user-image"},L=["src"],B={class:"user-info"},D={class:"user-list"},F=N({__name:"MyView",setup(E){const c=I();let h=localStorage.getItem("AUTOTOKEN"),o=S({nickName:"",imgUrl:"",account:"",createAt:""});h?(async d=>{let e=!1;await v.userLogged({token:d}).then(n=>{let{code:l}=n;l==200&&(e=!0)}),e&&await v.userInfo({token:d}).then(n=>{let{code:l,result:i}=n;if(l==200&&i.length==1){let[a]=i;o.nickName=a.nickName,o.account=a.account,o.imgUrl=v.host+a.imgUrl,localStorage.setItem("USERIMG",o.imgUrl),localStorage.setItem("ACCOUNT",o.account);let g=new Date;g.setTime(a.createAt),o.createAt=g.toLocaleDateString()+" "+g.toLocaleTimeString()}})})(h):c.replace({path:"/login"});const U=()=>{c.push({path:"/home/category"})},C=()=>{c.replace({path:"/score"})},m=T(!1);return(d,e)=>{const n=_("van-icon"),l=_("router-link"),i=_("van-dialog");return w(),k(A,null,[t("div",V,[s(n,{onClick:U,name:"arrow-left"})]),t("div",b,[t("div",x,[r(o).imgUrl?(w(),k("img",{key:0,src:r(o).imgUrl,alt:""},null,8,L)):y("",!0)]),t("div",B,[t("p",null,p(r(o).nickName),1),t("p",null,"注册时间："+p(r(o).createAt),1),t("p",null,"账号: "+p(r(o).account),1)]),t("div",D,[t("ul",null,[s(l,{to:"/edit"},{default:f(()=>[t("li",null,[s(n,{name:"photo-o"}),e[2]||(e[2]=u(" 个人资料 "))])]),_:1}),t("li",{onClick:C},[s(n,{name:"label-o"}),e[3]||(e[3]=u(" 我的成绩 "))]),t("li",{onClick:e[0]||(e[0]=a=>m.value=!0)},[s(n,{name:"phone-o"}),e[4]||(e[4]=u(" 联系我们 "))]),s(l,{to:"/secure"},{default:f(()=>[t("li",null,[s(n,{name:"shield-o"}),e[5]||(e[5]=u(" 账号安全 "))])]),_:1})])])]),s(i,{show:m.value,"onUpdate:show":e[1]||(e[1]=a=>m.value=a),title:"联系我们","show-cancel-button":""},{default:f(()=>e[6]||(e[6]=[t("div",{class:"about-me"},[t("h3",null,"电话:18316484142"),t("p",null,"WeChat：wangyongguo")],-1)])),_:1},8,["show"])],64)}}});export{F as default};
