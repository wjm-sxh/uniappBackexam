import{r as m}from"./request-DfzbtKw4.js";import{d as h,h as k,c as w,a,e as l,w as x,F as U,k as V,l as u,b as r,o as C,f as I}from"./index-BLDBbRsw.js";const T={class:"header"},b={class:"edit"},E={class:"opt",style:{"text-align":"left"}},F={class:"opt"},R=h({__name:"EditInfo",setup(N){const p=V(),c=new FormData,_=t=>{c.append("photo",t.file)};let i=localStorage.getItem("AUTOTOKEN");const d=k([{url:localStorage.getItem("USERIMG")}]),f=async()=>{if(i==null)return!1;let t;await m.photoUpload(c).then(e=>{console.log(e);let{code:o,msg:s,picUrl:n}=e;o==200?t=n:u(s)}),t&&await m.userImg({token:i,imgUrl:t}).then(e=>{let{msg:o}=e;u(o)})},v=()=>{p.go(-1)};return(t,e)=>{const o=r("van-icon"),s=r("van-uploader"),n=r("van-button");return C(),w(U,null,[a("div",T,[l(o,{name:"arrow-left",onClick:v})]),a("div",b,[a("div",E,[l(s,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=g=>d.value=g),"max-count":1,"after-read":_},null,8,["modelValue"])]),a("div",F,[l(n,{onClick:f,plain:"",type:"success",size:"small"},{default:x(()=>e[1]||(e[1]=[I("保存头像")])),_:1})])])],64)}}});export{R as default};
