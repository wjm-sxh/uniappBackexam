import{d as N,g as w,c as f,a as e,e as s,u as l,q as y,t as m,w as k,f as r,F as S,k as T,b as h,o as U}from"./index-BLDBbRsw.js";import{r as d}from"./request-DfzbtKw4.js";const A={class:"header"},C={class:"my"},I={class:"user-image"},V=["src"],x={class:"user-info"},L={class:"user-list"},q=N({__name:"MyView",setup(B){const g=T();let p=localStorage.getItem("AUTOTOKEN"),o=w({nickName:"",imgUrl:"",account:"",createAt:""});p?(async c=>{let t=!1;await d.userLogged({token:c}).then(n=>{let{code:a}=n;a==200&&(t=!0)}),t&&await d.userInfo({token:c}).then(n=>{let{code:a,result:_}=n;if(a==200&&_.length==1){let[i]=_;o.nickName=i.nickName,o.account=i.account,o.imgUrl=d.host+i.imgUrl,localStorage.setItem("USERIMG",o.imgUrl);let u=new Date;u.setTime(i.createAt),o.createAt=u.toLocaleDateString()+" "+u.toLocaleTimeString()}})})(p):g.replace({path:"/login"});const v=()=>{g.push({path:"/home/category"})};return(c,t)=>{const n=h("van-icon"),a=h("router-link");return U(),f(S,null,[e("div",A,[s(n,{onClick:v,name:"arrow-left"})]),e("div",C,[e("div",I,[l(o).imgUrl?(U(),f("img",{key:0,src:l(o).imgUrl,alt:""},null,8,V)):y("",!0)]),e("div",x,[e("p",null,m(l(o).nickName),1),e("p",null,"注册时间："+m(l(o).createAt),1),e("p",null,"账号: "+m(l(o).account),1)]),e("div",L,[e("ul",null,[s(a,{to:"/edit"},{default:k(()=>[e("li",null,[s(n,{name:"photo-o"}),t[0]||(t[0]=r(" 个人资料 "))])]),_:1}),e("li",null,[s(n,{name:"label-o"}),t[1]||(t[1]=r(" 我的成绩 "))]),e("li",null,[s(n,{name:"phone-o"}),t[2]||(t[2]=r(" 联系我们 "))]),s(a,{to:"/secure"},{default:k(()=>[e("li",null,[s(n,{name:"shield-o"}),t[3]||(t[3]=r(" 账号安全 "))])]),_:1})])])])],64)}}});export{q as default};
